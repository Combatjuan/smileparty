<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Sample of websocket with golang</title>
		<script src="vendor/jquery-3.1.0.min.js"></script>
		<script>
$(function() {
	var ws = new WebSocket("ws://localhost:8080/start");
	ws.onmessage = function(e) {
		console.log("In: " + event.data);
	};
	var $ul = $('#msg-list');

	function doSend() {
		var data = {
			"user": "charwood",
			"msg": $('#name').val()
		}
		ws.send(JSON.stringify(data));
		console.log("Out: " + data);
		$('<li>').text(data.user + ": " + data.msg).appendTo($ul);
		$('#name').val("");
	}
	$('#sendBtn').click(doSend);
	$('#name').keypress(function(e) {
		if (e.keyCode == 13) doSend();
	});
});
		</script>
	</head>
	<body>
			<input id="name" type="text" />
			<input type="button" id="sendBtn" value="send"></input>
			<ul id="msg-list"></ul>
	</body>
</html>
